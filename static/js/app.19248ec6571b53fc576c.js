webpackJsonp([1],{"5EuY":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),e("div",{staticClass:"w3-content w3-margin-top"},[e("router-view")],1),this._v(" "),e("router-link",{staticClass:"w3-circle w3-card w3-button w3-blue w3-xlarge w3-hover-white w3-hover-text-blue",attrs:{to:"/add",id:"add-button"}},[this._v("+")])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"w3-blue w3-card w3-container"},[e("h2",[this._v("dQueue")])])}]};var n=a("VU/8")({name:"App"},r,!1,function(t){a("qTMe")},null,null).exports,o=a("/ocq"),s=a("Sazm"),c=a.n(s),l=(a("3VHS"),c.a.initializeApp({apiKey:"AIzaSyBQiaDvmFs5vwFcs6e8Y36r8i54nHUUyxM",authDomain:"dg-printing-queue.firebaseapp.com",databaseURL:"https://dg-printing-queue.firebaseio.com",projectId:"dg-printing-queue",storageBucket:"dg-printing-queue.appspot.com",messagingSenderId:"690934867484"}).firestore()),u={name:"dashboard",data:function(){return{jobs:[],jobsLoaded:!1,timeEstimate:0,priorityEstimate:0,estimatedDate:new Date}},created:function(){this.fetchJobs()},methods:{compareDates:function(t,e){return t.creationDate<e.creationDate?-1:t.creationDate>e.creationDate?1:0},fetchJobs:function(){var t=this;this.jobs=[],this.jobsLoaded=!1;var e=[],a=[];l.collection("print_jobs").get().then(function(i){i.forEach(function(t){var i={id:t.id,name:t.data().name,part:t.data().part,time:t.data().print_time,material:t.data().material,priority:t.data().priority,creationDate:t.data().creationDate};"high"===i.priority?e.push(i):a.push(i)}),e=e.sort(t.compareDates),a=a.sort(t.compareDates),e.forEach(function(e){return t.jobs.push(e)}),a.forEach(function(e){return t.jobs.push(e)}),t.jobsLoaded=!0,t.timeEstimate=t.jobs.reduce(function(t,e){return t+Number(e.time)},0),t.priorityEstimate=t.jobs.reduce(function(t,e){return"high"===e.priority?t+Number(e.time):t+0},0),t.checkEstimatedDate(),setTimeout(t.fetchJobs,3e4)})},deleteJob:function(t){var e=this;confirm("Oletko varma?")&&l.collection("print_jobs").where("part","==",t.part).where("name","==",t.name).where("print_time","==",t.time).where("creationDate","==",t.creationDate).get().then(function(t){t.forEach(function(t){t.ref.delete(),e.fetchJobs()})})},checkEstimatedDate:function(){var t=new Date;t.setHours(t.getHours()+Number(this.timeEstimate)),this.estimatedDate=t}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"dashboard"}},[a("div",{staticClass:"w3-row"},[a("div",{staticClass:"w3-col m7 w3-container w3-margin-bottom"},[a("router-link",{staticClass:"w3-border-blue w3-border w3-white w3-center w3-margin-bottom w3-text-blue w3-xxlarge",attrs:{id:"add-button-top",to:"/add"}},[t._v("+")]),t._v(" "),a("ul",{staticClass:"w3-ul",attrs:{id:"print-job-list"}},[t.jobsLoaded?t._e():a("li",{staticClass:"w3-center w3-margin-top"},[a("i",{staticClass:"fas fa-sync fa-spin w3-text-blue fa-2x"})]),t._v(" "),t.jobsLoaded&&t.jobs.length<1?a("li",{staticClass:"w3-center w3-margin-top"},[a("p",{staticClass:"w3-text-blue w3-large"},[t._v("...")])]):t._e(),t._v(" "),t._l(t.jobs,function(e){return a("li",{staticClass:"w3-card print-job",class:{"priority-high":"high"==e.priority,"priority-low":"high"!=e.priority}},[a("button",{staticClass:"w3-button w3-hover-none w3-large w3-right",on:{click:function(a){t.deleteJob(e)}}},[a("i",{staticClass:"fas fa-trash-alt"})]),t._v(" "),a("span",{staticClass:"w3-xlarge"},[t._v("\n            "+t._s(e.part)+"\n            "),"high"==e.priority?a("span",[a("i",{staticClass:"fas fa-exclamation-circle"})]):t._e()]),a("br"),t._v("\n          Tulostaja: "+t._s(e.name)+" "),a("br"),t._v("\n          Materiaali: "+t._s(e.material)+" "),a("br"),t._v("\n          Aika: "+t._s(Number(e.time))+"h\n        ")])})],2)],1),t._v(" "),a("div",{staticClass:"w3-col m5 w3-container"},[a("div",{staticClass:"w3-white w3-leftbar w3-border-blue w3-card w3- w3-padding w3-large"},[t._m(0),t._v(" "),a("p",[t._v("Kaikki: "+t._s(t.timeEstimate)+"h")]),t._v(" "),a("p",[t._v("Kiireelliset: "+t._s(t.priorityEstimate)+"h "),a("i",{staticClass:"fas fa-exclamation-circle w3-text-blue"})]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v(t._s(t.estimatedDate.toLocaleDateString("fi",{weekday:"long",month:"long",day:"numeric"}))+" "+t._s(t.estimatedDate.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("u",[this._v("Yhteensä")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("u",[this._v("Tulostin vapaana")])])}]};var p=a("VU/8")(u,d,!1,function(t){a("5EuY")},"data-v-23775286",null).exports,m={name:"add-job",data:function(){return{part:null,name:null,material:null,time:null,priority:"high"}},methods:{addJob:function(){var t=this;l.collection("print_jobs").add({name:this.name,part:this.part,print_time:this.time,material:this.material,priority:this.priority,creationDate:new Date}).then(function(e){return t.$router.push("/")}).catch(function(t){return console.error("Error adding new job: ",t)})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w3-container",attrs:{id:"add-job"}},[a("form",{staticClass:"w3-white w3-card",attrs:{id:"add-item-form",action:""},on:{submit:function(e){e.preventDefault(),t.addJob(e)}}},[t._m(0),t._v(" "),a("div",{staticClass:"w3-container w3-white w3-text-blue w3-padding-large"},[a("label",[t._v("Tulostettava kappale")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.part,expression:"part"}],staticClass:"w3-input w3-hover-opacity",attrs:{type:"text",placeholder:"...",required:""},domProps:{value:t.part},on:{input:function(e){e.target.composing||(t.part=e.target.value)}}}),t._v(" "),a("label",[t._v("Tulostaja")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"w3-input w3-hover-opacity",attrs:{type:"text",placeholder:"...",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),a("label",[t._v("Materiaali")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.material,expression:"material"}],staticClass:"w3-input w3-hover-opacity",attrs:{type:"text",placeholder:"...",required:""},domProps:{value:t.material},on:{input:function(e){e.target.composing||(t.material=e.target.value)}}}),t._v(" "),a("label",[t._v("Tulostusaika (h)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],staticClass:"w3-input w3-hover-opacity",attrs:{type:"number",placeholder:"0",min:"0",required:""},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}}),t._v(" "),a("label",[t._v("Kiireisyys")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.priority,expression:"priority"}],staticClass:"w3-radio",attrs:{type:"radio",value:"high"},domProps:{checked:t._q(t.priority,"high")},on:{change:function(e){t.priority="high"}}}),t._v(" "),a("label",{staticClass:"w3-medium w3-margin-left",attrs:{for:"high"}},[t._v("Kiireinen")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.priority,expression:"priority"}],staticClass:"w3-radio",attrs:{type:"radio",value:"low"},domProps:{checked:t._q(t.priority,"low")},on:{change:function(e){t.priority="low"}}}),t._v(" "),a("label",{staticClass:"w3-medium w3-margin-left",attrs:{for:"low"}},[t._v("Ei kiireinen")]),t._v(" "),a("input",{staticClass:"w3-button w3-blue w3-hover-blue w3-hover-opacity w3-section",attrs:{type:"submit",value:"Lisää"}}),t._v(" "),a("router-link",{staticClass:"w3-button w3-block w3-grey w3-text-white w3-hover-grey w3-hover-text-white w3-hover-opacity",attrs:{to:"/"}},[t._v("Takaisin")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"w3-container w3-blue w3-text-white"},[e("h2",[this._v("Lisää tuloste")])])}]};var v=a("VU/8")(m,h,!1,function(t){a("iqU+")},"data-v-18cac417",null).exports;i.a.use(o.a);var w=new o.a({routes:[{path:"/",name:"dashboard",component:p},{path:"/add",name:"add-job",component:v}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:w,components:{App:n},template:"<App/>"})},"iqU+":function(t,e){},qTMe:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.19248ec6571b53fc576c.js.map