webpackJsonp([1],{"6TVH":function(t,e){},KhPm:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n=a("//Fk"),r=a.n(n),s=a("Sazm"),o=a.n(s),l=(a("3VHS"),o.a.initializeApp({apiKey:"AIzaSyBQiaDvmFs5vwFcs6e8Y36r8i54nHUUyxM",authDomain:"dg-printing-queue.firebaseapp.com",databaseURL:"https://dg-printing-queue.firebaseio.com",projectId:"dg-printing-queue",storageBucket:"dg-printing-queue.appspot.com",messagingSenderId:"690934867484"})),c={loggedIn:!1,login:function(t,e){var a=this;return new r.a(function(i,n){l.auth().signInWithEmailAndPassword(t,e).then(function(){a.loggedIn=!0,i()}).catch(function(t){n(t)})})},logout:function(){var t=this;return new r.a(function(e,a){l.auth().signOut().then(function(){t.loggedIn=!1,e()}).catch(function(t){a(t)})})},checkAuth:function(){return this.loggedIn}},u={name:"App",data:function(){return{loggedIn:!1,email:null,pass:null,loginErrMsg:""}},created:function(){this.loggedIn=c.checkAuth(),this.$router.push("/")},methods:{login:function(){var t=this;c.login(this.email,this.pass).then(function(){t.loggedIn=!0,t.$router.push("/")}).catch(function(e){t.loginErrMsg=e.message})},logout:function(){var t=this;c.logout().then(function(){t.loggedIn=!1,t.loginErrMsg=""}).catch(function(t){console.log("Virhe "+t.message)})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("header",{staticClass:"w3-bar w3-blue w3-card"},[a("router-link",{staticClass:"w3-button w3-hover-none w3-hover-text-white w3-bar-item w3-large",attrs:{to:"/"}},[t._v("dQueue")]),t._v(" "),t.loggedIn?a("div",{staticClass:"w3-right"},[a("router-link",{staticClass:"w3-bar-item w3-button",attrs:{to:"/help",id:"help-btn"}},[a("i",{staticClass:"fas fa-info"}),a("span",{staticClass:"w3-hide-small"},[t._v(" Ohje")])]),t._v(" "),a("a",{staticClass:"w3-bar-item w3-button",attrs:{id:"sign-out-btn"},on:{click:function(e){e.preventDefault(),t.logout(e)}}},[a("i",{staticClass:"fas fa-sign-out-alt"}),a("span",{staticClass:"w3-hide-small"},[t._v(" Kirjaudu ulos")])])],1):t._e()],1),t._v(" "),a("div",{staticClass:"w3-content w3-margin-top"},[t.loggedIn?a("router-view"):t._e()],1),t._v(" "),t.loggedIn?t._e():a("div",{staticClass:"w3-container w3-margin-top"},[a("div",{staticClass:"w3-white w3-card w3-content"},[t._m(0),t._v(" "),a("form",{staticClass:"w3-center w3-container w3-padding-large",on:{submit:function(e){e.preventDefault(),t.login(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"w3-input w3-section w3-left-align",attrs:{type:"text",placeholder:"Tunnus..."},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],staticClass:"w3-input w3-margin-bottom w3-left-align",attrs:{type:"password",placeholder:"Salasana..."},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}}),t._v(" "),a("p",{staticClass:"w3-text-red"},[t._v(t._s(t.loginErrMsg))]),t._v(" "),a("input",{staticClass:"w3-button w3-blue w3-text-white w3-hover-blue w3-hover-text-white w3-hover-opacity",attrs:{type:"submit",value:"Kirjaudu sisään"}})])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"w3-container w3-blue"},[e("h1",[this._v("Kirjaudu sisään")])])}]};var p=a("VU/8")(u,d,!1,function(t){a("x5BO")},null,null).exports,h=a("/ocq"),m=l.firestore(),w={compareDates:function(t,e){return t.creationDate<e.creationDate?-1:t.creationDate>e.creationDate?1:0},getJobs:function(t,e){var a=this,i=[],n=[];return m.collection("print_jobs").get().then(function(r){r.forEach(function(t){var e={id:t.id,name:t.data().name,part:t.data().part,time:t.data().print_time,material:t.data().material,priority:t.data().priority,creationDate:t.data().creationDate};"high"===e.priority?i.push(e):n.push(e)}),i=i.sort(a.compareDates),n=n.sort(a.compareDates),i.forEach(function(e){return t.push(e)}),n.forEach(function(e){return t.push(e)}),e()})},addJob:function(t,e){m.collection("print_jobs").add({name:t.name,part:t.part,print_time:t.time,material:t.material,priority:t.priority,creationDate:new Date}).then(function(t){return e()}).catch(function(t){return console.error("Error adding new job: ",t)})},removeJob:function(t,e){return m.collection("print_jobs").where("part","==",t.part).where("name","==",t.name).where("print_time","==",t.time).where("creationDate","==",t.creationDate).get().then(function(t){t.forEach(function(t){t.ref.delete(),e()})})}},v={name:"dashboard",data:function(){return{loggedIn:!1,jobs:[],jobsLoaded:!1,timeEstimate:0,priorityEstimate:0,estimatedDate:new Date}},created:function(){this.loggedIn=c.checkAuth(),this.loggedIn||this.$router.push("/login"),this.fetchJobs()},methods:{fetchJobs:function(){var t=this;this.jobs=[],this.jobsLoaded=!1,this.loggedIn&&w.getJobs(this.jobs,function(){t.jobsLoaded=!0,t.timeEstimate=t.jobs.reduce(function(t,e){return t+Number(e.time)},0),t.priorityEstimate=t.jobs.reduce(function(t,e){return"high"===e.priority?t+Number(e.time):t+0},0),t.checkEstimatedDate(),setTimeout(t.fetchJobs,4e4)})},deleteJob:function(t){var e=this;confirm("Oletko varma?")&&w.removeJob(t,function(){e.fetchJobs()})},checkEstimatedDate:function(){var t=new Date;t.setHours(t.getHours()+Number(this.timeEstimate)),this.estimatedDate=t}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loggedIn?a("div",{attrs:{id:"dashboard"}},[a("div",{staticClass:"w3-row"},[a("div",{staticClass:"w3-col m7 w3-container w3-margin-bottom"},[a("router-link",{staticClass:"w3-border-blue w3-border w3-white w3-center w3-margin-bottom w3-text-blue w3-xxlarge",attrs:{id:"add-button-top",to:"/add"}},[t._v("+")]),t._v(" "),a("ul",{staticClass:"w3-ul",attrs:{id:"print-job-list"}},[t.jobsLoaded?t._e():a("li",{staticClass:"w3-center w3-section w3-animate-opacity"},[a("i",{staticClass:"fas fa-sync fa-spin w3-text-blue fa-2x"})]),t._v(" "),t.jobsLoaded&&t.jobs.length<1?a("li",{staticClass:"w3-center w3-margin-top w3-animate-opacity"},[a("p",{staticClass:"w3-text-blue w3-large"},[t._v("...")])]):t._e(),t._v(" "),t._l(t.jobs,function(e){return a("li",{staticClass:"w3-card print-job w3-animate-opacity",class:{"priority-high":"high"==e.priority,"priority-low":"high"!=e.priority}},[a("button",{staticClass:"w3-button w3-hover-none w3-large w3-right",on:{click:function(a){t.deleteJob(e)}}},[a("i",{staticClass:"fas fa-trash-alt"})]),t._v(" "),a("span",{staticClass:"w3-xlarge"},[t._v("\n            "+t._s(e.part)+"\n            "),"high"==e.priority?a("span",[a("i",{staticClass:"fas fa-exclamation-circle"})]):t._e()]),a("br"),t._v("\n          Tulostaja: "+t._s(e.name)+" "),a("br"),t._v("\n          Materiaali: "+t._s(e.material)+" "),a("br"),t._v("\n          Aika: "+t._s(Number(e.time))+"h\n        ")])})],2)],1),t._v(" "),a("div",{staticClass:"w3-col m5 w3-container"},[a("div",{staticClass:"w3-white w3-leftbar w3-border-blue w3-card w3- w3-padding w3-large w3-margin-bottom"},[t._m(0),t._v(" "),a("p",[t._v("Kaikki: "+t._s(t.timeEstimate)+"h")]),t._v(" "),a("p",[t._v("Kiireelliset: "+t._s(t.priorityEstimate)+"h "),a("i",{staticClass:"fas fa-exclamation-circle w3-text-blue"})]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v(t._s(t.estimatedDate.toLocaleDateString("fi",{weekday:"long",month:"long",day:"numeric"}))+" "+t._s(t.estimatedDate.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})))])])])])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("u",[this._v("Yhteensä")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("u",[this._v("Tulostin vapaana")])])}]};var f=a("VU/8")(v,g,!1,function(t){a("KhPm")},"data-v-51c8a070",null).exports,_={name:"add-job",data:function(){return{loggedIn:!1,part:null,name:null,material:null,time:null,priority:"high"}},created:function(){this.loggedIn=c.checkAuth(),this.loggedIn||this.$router.push("/")},methods:{addJob:function(){var t=this,e={name:this.name,part:this.part,time:this.time,material:this.material,priority:this.priority};w.addJob(e,function(){t.$router.push("/")})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loggedIn?a("div",{staticClass:"w3-container",attrs:{id:"add-job"}},[a("form",{staticClass:"w3-white w3-card",attrs:{id:"add-item-form",action:""},on:{submit:function(e){e.preventDefault(),t.addJob(e)}}},[t._m(0),t._v(" "),a("div",{staticClass:"w3-container w3-white w3-text-blue w3-padding-large"},[a("label",[t._v("Tulostettava kappale")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.part,expression:"part"}],staticClass:"w3-input w3-hover-opacity",attrs:{type:"text",placeholder:"...",required:""},domProps:{value:t.part},on:{input:function(e){e.target.composing||(t.part=e.target.value)}}}),t._v(" "),a("label",[t._v("Tulostaja")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"w3-input w3-hover-opacity",attrs:{type:"text",placeholder:"...",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),a("label",[t._v("Materiaali")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.material,expression:"material"}],staticClass:"w3-input w3-hover-opacity",attrs:{type:"text",placeholder:"...",required:""},domProps:{value:t.material},on:{input:function(e){e.target.composing||(t.material=e.target.value)}}}),t._v(" "),a("label",[t._v("Tulostusaika (h)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],staticClass:"w3-input w3-hover-opacity",attrs:{type:"number",placeholder:"0",min:"0",required:""},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}}),t._v(" "),a("label",[t._v("Kiireisyys")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.priority,expression:"priority"}],staticClass:"w3-radio",attrs:{type:"radio",value:"high"},domProps:{checked:t._q(t.priority,"high")},on:{change:function(e){t.priority="high"}}}),t._v(" "),a("label",{staticClass:"w3-medium w3-margin-left",attrs:{for:"high"}},[t._v("Kiireinen")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.priority,expression:"priority"}],staticClass:"w3-radio",attrs:{type:"radio",value:"low"},domProps:{checked:t._q(t.priority,"low")},on:{change:function(e){t.priority="low"}}}),t._v(" "),a("label",{staticClass:"w3-medium w3-margin-left",attrs:{for:"low"}},[t._v("Ei kiireinen")]),t._v(" "),a("input",{staticClass:"w3-button w3-blue w3-hover-blue w3-hover-opacity w3-section",attrs:{type:"submit",value:"Lisää"}}),t._v(" "),a("router-link",{staticClass:"w3-button w3-block w3-grey w3-text-white w3-hover-grey w3-hover-text-white w3-hover-opacity",attrs:{to:"/"}},[t._v("Takaisin")])],1)])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"w3-container w3-blue w3-text-white"},[e("h2",[this._v("Lisää tuloste")])])}]};var y=a("VU/8")(_,b,!1,function(t){a("RWmF")},"data-v-4c605cb6",null).exports,C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w3-container",attrs:{id:"help"}},[e("div",{staticClass:"w3-white w3-card",attrs:{id:"help-container"}},[this._m(0),this._v(" "),e("div",{staticClass:"w3-container w3-white w3-text-blue w3-padding-large"},[e("p",[this._v("Tulossa pian...")]),this._v(" "),e("router-link",{staticClass:"w3-button w3-section w3-blue w3-hover-blue w3-hover-text-white w3-hover-opacity",attrs:{to:"/"}},[this._v("\n        Takaisin\n      ")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"w3-container w3-blue w3-text-white"},[e("h2",[this._v("Pikaohje")])])}]};var x=a("VU/8")({name:"help"},C,!1,function(t){a("6TVH")},"data-v-14a377c0",null).exports;i.a.use(h.a);var j=new h.a({routes:[{path:"/",name:"dashboard",component:f},{path:"/add",name:"add-job",component:y},{path:"/help",name:"help",component:x}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:j,components:{App:p},template:"<App/>"})},RWmF:function(t,e){},x5BO:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1010c315d40e09207da3.js.map