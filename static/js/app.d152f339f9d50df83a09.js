webpackJsonp([1],{GHFS:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),e("div",{staticClass:"w3-container w3-margin-top"},[e("router-view")],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"w3-dark-grey w3-container"},[e("h1",[this._v("DG Tulostusjono")])])}]};var n=i("VU/8")({name:"App"},a,!1,function(t){i("GHFS")},null,null).exports,o=i("/ocq"),s=i("Sazm"),c=i.n(s),u=(i("3VHS"),c.a.initializeApp({apiKey:"AIzaSyBQiaDvmFs5vwFcs6e8Y36r8i54nHUUyxM",authDomain:"dg-printing-queue.firebaseapp.com",databaseURL:"https://dg-printing-queue.firebaseio.com",projectId:"dg-printing-queue",storageBucket:"dg-printing-queue.appspot.com",messagingSenderId:"690934867484"}).firestore()),l={name:"dashboard",data:function(){return{jobs:[],timeEstimate:0,priorityEstimate:0,estimatedDate:new Date}},created:function(){this.fetchJobs()},methods:{comparePriorities:function(t,e){return"high"===t.priority?-1:"high"!==t.priority?1:0},fetchJobs:function(){var t=this;this.jobs=[],u.collection("print_jobs").get().then(function(e){e.forEach(function(e){var i={id:e.id,name:e.data().name,part:e.data().part,time:e.data().print_time,priority:e.data().priority};t.jobs.push(i)}),t.jobs.sort(t.comparePriorities),t.timeEstimate=t.jobs.reduce(function(t,e){return t+Number(e.time)},0),t.priorityEstimate=t.jobs.reduce(function(t,e){return"high"===e.priority?t+Number(e.time):t+0},0),t.checkEstimatedDate()})},deleteJob:function(t){var e=this;confirm("Oletko varma?")&&(console.log(t.id),u.collection("print_jobs").where("part","==",t.part).where("name","==",t.name).where("print_time","==",t.time).get().then(function(t){t.forEach(function(t){t.ref.delete(),e.fetchJobs()})}))},checkEstimatedDate:function(){var t=new Date;t.setHours(t.getHours()+Number(this.timeEstimate)),this.estimatedDate=t}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"dashboard"}},[i("div",{staticClass:"w3-row"},[i("div",{staticClass:"w3-twothird w3-padding"},[i("div",{staticClass:"w3-container"},[i("ul",{staticClass:"w3-ul",attrs:{id:"print-job-list"}},t._l(t.jobs,function(e){return i("li",{staticClass:"print-job",class:{"priority-high":"high"===e.priority,"priority-low":"high"!==e.priority}},[i("button",{staticClass:"w3-button w3-circle w3-white w3-hover-green w3-large w3-right",on:{click:function(i){t.deleteJob(e)}}},[t._v("✓")]),t._v(" "),i("span",{staticClass:"w3-xlarge"},[t._v(t._s(e.part))]),i("br"),t._v("\n            Tulostaja: "+t._s(e.name)+" "),i("br"),t._v("\n            Aika: "+t._s(e.time)+"h\n          ")])})),t._v(" "),i("router-link",{staticClass:"w3-circle w3-card w3-button w3-green w3-xlarge w3-hover-green w3-hover-text-black",attrs:{to:"/add",id:"add-button"}},[t._v("+")])],1)]),t._v(" "),i("div",{staticClass:"w3-third w3-padding"},[i("div",{staticClass:"w3-container w3-white w3-round w3-padding w3-large"},[t._m(0),t._v(" "),i("p",[t._v("Kaikki: "+t._s(t.timeEstimate)+"h")]),t._v(" "),i("p",[t._v("Kiireiset: "+t._s(t.priorityEstimate)+"h")]),t._v(" "),t._m(1),t._v(" "),i("p",[t._v(t._s(t.estimatedDate.toLocaleString("fi",{weekday:"long",hour:"2-digit",minute:"2-digit"})))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("u",[this._v("Aika")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("u",[this._v("Käytettävissä")])])}]};var p=i("VU/8")(l,d,!1,function(t){i("Yvnt")},"data-v-793c2047",null).exports,m={name:"add-job",data:function(){return{part:null,name:null,time:0,priority:"high"}},methods:{addJob:function(){var t=this;u.collection("print_jobs").add({name:this.name,part:this.part,print_time:this.time,priority:this.priority}).then(function(e){return t.$router.push("/")}).catch(function(t){return console.error("Error adding new job: ",t)})}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w3-content w3-padding-large",attrs:{id:"add-job"}},[i("form",{attrs:{id:"add-item-form",action:""},on:{submit:function(e){e.preventDefault(),t.addJob(e)}}},[i("label",[t._v("Tulostettava kappale")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.part,expression:"part"}],attrs:{type:"text",placeholder:"default",required:""},domProps:{value:t.part},on:{input:function(e){e.target.composing||(t.part=e.target.value)}}}),t._v(" "),i("label",[t._v("Tulostaja")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"default",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),i("label",[t._v("Tulostusaika (h)")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],attrs:{type:"number",placeholder:"0",min:"0",required:""},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}}),t._v(" "),i("label",[t._v("Kiireisyys")]),i("br"),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.priority,expression:"priority"}],attrs:{type:"radio",value:"high"},domProps:{checked:t._q(t.priority,"high")},on:{change:function(e){t.priority="high"}}}),t._v(" "),i("label",{attrs:{for:"high"}},[t._v("Kiireinen")]),i("br"),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.priority,expression:"priority"}],attrs:{type:"radio",value:"low"},domProps:{checked:t._q(t.priority,"low")},on:{change:function(e){t.priority="low"}}}),t._v(" "),i("label",{attrs:{for:"low"}},[t._v("Ei kiireinen")]),t._v(" "),i("input",{staticClass:"w3-button w3-green w3-hover-green w3-hover-text-black w3-section",attrs:{type:"submit",value:"Lisää"}}),t._v(" "),i("router-link",{staticClass:"w3-button w3-block w3-grey w3-round w3-text-white w3-hover-grey w3-hover-text-black",attrs:{to:"/"}},[t._v("Takaisin")])],1)])},staticRenderFns:[]};var h=i("VU/8")(m,v,!1,function(t){i("cNjW")},"data-v-6b7a6c30",null).exports;r.a.use(o.a);var w=new o.a({routes:[{path:"/",name:"dashboard",component:p},{path:"/add",name:"add-job",component:h}]});r.a.config.productionTip=!1,new r.a({el:"#app",router:w,components:{App:n},template:"<App/>"})},Yvnt:function(t,e){},cNjW:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d152f339f9d50df83a09.js.map