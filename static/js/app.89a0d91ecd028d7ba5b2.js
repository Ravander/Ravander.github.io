webpackJsonp([1],{"9Tyg":function(t,e){},ATjc:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),e("div",{staticClass:"w3-content w3-margin-top"},[e("router-view")],1),this._v(" "),e("router-link",{staticClass:"w3-circle w3-card w3-button w3-blue w3-xlarge w3-hover-white w3-hover-text-blue",attrs:{to:"/add",id:"add-button"}},[this._v("+")])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"w3-blue w3-card w3-container"},[e("h1",[this._v("DG Tulostusjono")])])}]};var n=i("VU/8")({name:"App"},r,!1,function(t){i("9Tyg")},null,null).exports,o=i("/ocq"),s=i("Sazm"),c=i.n(s),u=(i("3VHS"),c.a.initializeApp({apiKey:"AIzaSyBQiaDvmFs5vwFcs6e8Y36r8i54nHUUyxM",authDomain:"dg-printing-queue.firebaseapp.com",databaseURL:"https://dg-printing-queue.firebaseio.com",projectId:"dg-printing-queue",storageBucket:"dg-printing-queue.appspot.com",messagingSenderId:"690934867484"}).firestore()),l={name:"dashboard",data:function(){return{jobs:[],timeEstimate:0,priorityEstimate:0,estimatedDate:new Date}},created:function(){this.fetchJobs()},methods:{compareDates:function(t,e){return t.creationDate<e.creationDate?-1:t.creationDate>e.creationDate?1:0},fetchJobs:function(){var t=this;this.jobs=[];var e=[],i=[];u.collection("print_jobs").get().then(function(a){a.forEach(function(t){var a={id:t.id,name:t.data().name,part:t.data().part,time:t.data().print_time,priority:t.data().priority,creationDate:t.data().creationDate};"high"===a.priority?e.push(a):i.push(a)}),e=e.sort(t.compareDates),i=i.sort(t.compareDates),e.forEach(function(e){return t.jobs.push(e)}),i.forEach(function(e){return t.jobs.push(e)}),t.timeEstimate=t.jobs.reduce(function(t,e){return t+Number(e.time)},0),t.priorityEstimate=t.jobs.reduce(function(t,e){return"high"===e.priority?t+Number(e.time):t+0},0),t.checkEstimatedDate()})},deleteJob:function(t){var e=this;confirm("Oletko varma?")&&u.collection("print_jobs").where("part","==",t.part).where("name","==",t.name).where("print_time","==",t.time).where("creationDate","==",t.creationDate).get().then(function(t){t.forEach(function(t){t.ref.delete(),e.fetchJobs()})})},checkEstimatedDate:function(){var t=new Date;t.setHours(t.getHours()+Number(this.timeEstimate)),this.estimatedDate=t}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"dashboard"}},[i("div",{staticClass:"w3-row"},[i("div",{staticClass:"w3-col m7 w3-container w3-margin-bottom"},[i("ul",{staticClass:"w3-ul",attrs:{id:"print-job-list"}},t._l(t.jobs,function(e){return i("li",{staticClass:"w3-card print-job",class:{"priority-high":"high"==e.priority,"priority-low":"high"!=e.priority}},[i("button",{staticClass:"w3-button w3-hover-none w3-circle w3-large w3-right",on:{click:function(i){t.deleteJob(e)}}},[t._v("✔")]),t._v(" "),i("span",{staticClass:"w3-xlarge"},[t._v("\n            "+t._s(e.part)+"\n            "),"high"==e.priority?i("span",{},[i("i",{staticClass:"fas fa-exclamation-circle"})]):t._e()]),i("br"),t._v("\n          Tulostaja: "+t._s(e.name)+" "),i("br"),t._v("\n          Aika: "+t._s(Number(e.time))+"h\n        ")])}))]),t._v(" "),i("div",{staticClass:"w3-col m5 w3-container"},[i("div",{staticClass:"w3-white w3-leftbar w3-border-blue w3-card w3- w3-padding w3-large"},[t._m(0),t._v(" "),i("p",[t._v("Kaikki: "+t._s(t.timeEstimate)+"h")]),t._v(" "),i("p",[t._v("Kiireiset: "+t._s(t.priorityEstimate)+"h")]),t._v(" "),t._m(1),t._v(" "),i("p",[t._v(t._s(t.estimatedDate.toLocaleDateString("fi",{weekday:"long",month:"long",day:"numeric"}))+" "+t._s(t.estimatedDate.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("u",[this._v("Aika")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("u",[this._v("Käytettävissä")])])}]};var d=i("VU/8")(l,p,!1,function(t){i("YaiX")},"data-v-e0708954",null).exports,m={name:"add-job",data:function(){return{part:null,name:null,time:0,priority:"high"}},methods:{addJob:function(){var t=this;u.collection("print_jobs").add({name:this.name,part:this.part,print_time:this.time,priority:this.priority,creationDate:new Date}).then(function(e){return t.$router.push("/")}).catch(function(t){return console.error("Error adding new job: ",t)})}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w3-container",attrs:{id:"add-job"}},[i("form",{staticClass:"w3-white w3-card",attrs:{id:"add-item-form",action:""},on:{submit:function(e){e.preventDefault(),t.addJob(e)}}},[t._m(0),t._v(" "),i("div",{staticClass:"w3-container w3-white w3-text-blue w3-padding-large"},[i("label",[t._v("Tulostettava kappale")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.part,expression:"part"}],staticClass:"w3-input w3-hover-opacity",attrs:{type:"text",placeholder:"default",required:""},domProps:{value:t.part},on:{input:function(e){e.target.composing||(t.part=e.target.value)}}}),t._v(" "),i("label",[t._v("Tulostaja")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"w3-input w3-hover-opacity",attrs:{type:"text",placeholder:"default",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),i("label",[t._v("Tulostusaika (h)")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],staticClass:"w3-input w3-hover-opacity",attrs:{type:"number",placeholder:"0",min:"0",required:""},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}}),t._v(" "),i("label",[t._v("Kiireisyys")]),i("br"),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.priority,expression:"priority"}],staticClass:"w3-radio",attrs:{type:"radio",value:"high"},domProps:{checked:t._q(t.priority,"high")},on:{change:function(e){t.priority="high"}}}),t._v(" "),i("label",{attrs:{for:"high"}},[t._v("Kiireinen")]),i("br"),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.priority,expression:"priority"}],staticClass:"w3-radio",attrs:{type:"radio",value:"low"},domProps:{checked:t._q(t.priority,"low")},on:{change:function(e){t.priority="low"}}}),t._v(" "),i("label",{attrs:{for:"low"}},[t._v("Ei kiireinen")]),t._v(" "),i("input",{staticClass:"w3-button w3-blue w3-hover-blue w3-hover-text-black w3-section",attrs:{type:"submit",value:"Lisää"}}),t._v(" "),i("router-link",{staticClass:"w3-button w3-block w3-grey w3-round w3-text-white w3-hover-grey w3-hover-text-black",attrs:{to:"/"}},[t._v("Takaisin")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"w3-container w3-blue w3-text-white"},[e("h2",[this._v("Lisää tuloste")])])}]};var v=i("VU/8")(m,h,!1,function(t){i("ATjc")},"data-v-65a733a8",null).exports;a.a.use(o.a);var w=new o.a({routes:[{path:"/",name:"dashboard",component:d},{path:"/add",name:"add-job",component:v}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:w,components:{App:n},template:"<App/>"})},YaiX:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.89a0d91ecd028d7ba5b2.js.map